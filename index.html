<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Requisição e repostas via API</title>
</head>

<body>

    <header>
        <nav>
            <div class="parent-box">
                <div class="header-link">
                    <li><a href="./index.html">Home</a></li>
                    <li><a href="./create-com-post.html">Create</a></li>
                    <li><a href="./delete-com-delete.html">Delete</a></li>
                    <li><a href="./update-com-put.html">Update</a></li>
                    <li><a href="./read-com-get.html">Read</a></li>
                    <div>
                        <h1 class="texto-tema">Tema do site</h1>
                    </div>
                    <div id="btn-slider" class="bts bts-base">
                        <div class="bts bts-slider"></div>
                    </div>
                </div>
            </div>
        </nav>
        <div>
            <h1>Requisição e repostas via API</h1> 
        </div>
    </header>

    <button type="button" id="btnFetch">Fetch</button>
    <div id="resposta"></div>

    <script src="./assets/scripts/styles.js"></script>
    <script type="module" src="./assets/scripts/update-com-put.js"></script>
    <script src="./assets/scripts/botao-slider.js"></script>

    <script>
        const requisicao = new Request('http://localhost:3000/produtos', {
            method: 'GET',
            headers: {
                'Content-type': 'application/json'
            }
        });

        document.querySelector('#btnFetch').addEventListener('click',()=>{

        fetch(requisicao)
            .then(resposta => resposta.json())
            // .then(resposta => JSON.stringify(resposta))
            // .then (resposta=> JSON.parse(resposta))
            .then(resposta => {

                document.querySelector('#resposta').innerHTML = "";

                for(let i = 0; i < resposta.length; i++) {

                    const ul = document.createElement("ul");
                    const produto =`
                    <li>ID: ${resposta[i].id}</li>
                    <li>Descrição: ${resposta[i].descricao}</li>
                    <li>Preço: ${resposta[i].preco}</li>
                    <li><img src=${resposta[i].imagem}></li>
                    `
                    
                    document.querySelector('#resposta').appendChild(ul).innerHTML = produto;
                }

            });
        })

    </script>
</body>

</html>